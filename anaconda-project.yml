name: elk-widget

variables:
  LAB_EXTENSIONS: >-
    @jupyter-widgets/jupyterlab-manager
    .
  ELK_SRC: >-
    setup.py
    elk

commands:
  setup:
    unix: python -m pip install -e . && jlpm bootstrap
    windows: python -m pip install -e . && jlpm bootstrap
  lab:
    unix: jupyter lab --no-browser --debug
    windows: jupyter lab --no-browser --debug
  lab:ext:
    unix: |-
      set -eux \
      && jupyter labextension install --no-build --debug $LAB_EXTENSIONS \
      && jupyter lab build --debug --dev-build=False --minimize=True \
      && jupyter labextension list
    windows: >-
      jupyter labextension install --no-build --debug %LAB_EXTENSIONS%
      && jupyter lab build --debug --dev-build=False --minimize=True
      && jupyter labextension list
  lint:
    unix: isort -rc $ELK_SRC && black $ELK_SRC && jlpm lint
    windows: isort -rc %ELK_SRC% && black %ELK_SRC% && jlpm lint

env_specs:
  default:
    platforms:
      - linux-64
      - win-64
    channels:
      - conda-forge
    packages:
      - black
      - isort
      - ipywidgets
      - jupyterlab =1
      - networkx
      - nodejs >=10,<14.0.0a0
      - pandas
